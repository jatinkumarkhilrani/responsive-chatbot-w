#!/usr/bin/env bash

# Pre-commit Hook Script
# This runs comprehensive tests before allowing commits

set -e

echo "ğŸ” Running pre-commit checks..."

# 1. TypeScript Check
echo "ğŸ“ Checking TypeScript..."
npm run test:types

# 2. ESLint Check  
echo "ğŸ” Running ESLint..."
npm run lint

# 3. Build Test
echo "ğŸ”¨ Testing build process..."
npm run build:standalone

# 4. Comprehensive Tests
echo "ğŸ§ª Running comprehensive test suite..."
npm run test:comprehensive

# 5. Performance Check
echo "âš¡ Performance check..."
if [ -d "dist" ]; then
    BUNDLE_SIZE=$(du -sh dist | cut -f1)
    echo "   Bundle size: $BUNDLE_SIZE"
fi

echo "âœ… All pre-commit checks passed!"
echo "ğŸš€ Ready to commit"